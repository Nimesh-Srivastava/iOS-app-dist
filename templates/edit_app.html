{% extends 'base.html' %} {% block title %}Edit {{ app.name }}{% endblock %} {%
block content %}
<div class="row justify-content-center">
	<div class="col-md-8">
		<div class="card">
			<div class="card-header">
				<h4 class="mb-0">Edit App: {{ app.name }}</h4>
			</div>
			<div class="card-body">
				<form method="post" enctype="multipart/form-data">
					<div class="row mb-3">
						<div class="col-md-3 text-center">
							<div class="mb-3">
								<img
									src="{{ app.icon }}"
									alt="App Icon"
									class="img-thumbnail"
									style="width: 128px; height: 128px"
								/>
							</div>
							<div class="mb-3">
								<label for="icon" class="form-label"
									>Update Icon</label
								>
								<input
									type="file"
									class="form-control"
									id="icon"
									name="icon"
									accept="image/*"
								/>
								<div class="form-text">
									Recommended size: 128x128 pixels
								</div>
							</div>
						</div>
						<div class="col-md-9">
							<div class="mb-3">
								<label for="name" class="form-label"
									>App Name</label
								>
								<input
									type="text"
									class="form-control"
									id="name"
									name="name"
									value="{{ app.name }}"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="version" class="form-label"
									>Version</label
								>
								<input
									type="text"
									class="form-control"
									id="version"
									name="version"
									value="{{ app.version }}"
									readonly
									disabled
								/>
								<div class="form-text">
									Version is automatically set from the latest version in version history
								</div>
							</div>
							<div class="mb-3">
								<label class="form-label">App ID</label>
								<input
									type="text"
									class="form-control"
									value="{{ app.id }}"
									readonly
									disabled
								/>
								<div class="form-text">
									App ID cannot be changed
								</div>
							</div>
							<div class="mb-3">
								<label class="form-label">Upload Date</label>
								<input
									type="text"
									class="form-control"
									value="{% if app.upload_date %} {{
										app.upload_date.split('T')[0] }} {% elif
										app.creation_date %} {{ app.creation_date.split('T')[0]
										}} {% else %} Unknown {% endif %}"
									readonly
									disabled
								/>
							</div>
							<div class="mb-3">
								<label for="bundle_id" class="form-label">Bundle ID</label>
								<input
									type="text"
									class="form-control"
									id="bundle_id"
									name="bundle_id"
									value="{{ app.bundle_id }}"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="build_number" class="form-label">Build Number</label>
								<input
									type="text"
									class="form-control"
									id="build_number"
									name="build_number"
									value="{{ app.build_number }}"
									readonly
									disabled
								/>
								<div class="form-text">
									Build number is automatically set from the latest version in version history
								</div>
							</div>
						</div>
					</div>

					<div class="mb-3">
						<label for="app_description" class="form-label">App Description</label>
						<textarea
							class="form-control"
							id="app_description"
							name="app_description"
							rows="2"
							maxlength="200"
							required
						>{{ app.description or '' }}</textarea>
						<div class="form-text">
							Brief description of the app (max 2 lines)
						</div>
					</div>

					<div class="d-flex justify-content-between">
						<a
							href="{{ url_for('app.app_detail', app_id=app.id) }}"
							class="btn btn-secondary"
							>Cancel</a
						>
						<button type="submit" class="btn btn-primary">
							Save Changes
						</button>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
{% endblock %}
